<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Theme Made By www.w3schools.com - No Copyright -->
  <title>Bootstrap Theme Simply Me</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
  <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
  <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <style>
  body {
      

      font: 20px Montserrat, sans-serif;
      line-height: 1.8;
      color: #f5f6f7;
  }
  #demo{
    height: 65px;
  }
  #distancia{
    height: 20px;
  }
  p {font-size: 16px;}
  .margin {margin-bottom: 45px;}
  .bg-1 { 
      background-color: #1abc9c; /* Green */
      color: #ffffff;
  }
  .bg-2 { 
      background-color: #474e5d; /* Dark Blue */
      color: #ffffff;
  }
  .bg-3 { 
      background-color: #ffffff; /* White */
      color: #555555;
  }
  .bg-4 { 
      background-color: #2f2f2f; /* Black Gray */
      color: #fff;
  }
  .container-fluid {
      padding-top: 70px;
      padding-bottom: 70px;
  }
  .navbar {
      padding-top: 15px;
      padding-bottom: 15px;
      border: 0;
      border-radius: 0;
      margin-bottom: 0;
      font-size: 12px;
      letter-spacing: 5px;
  }
  .navbar-nav  li a:hover {
      color: #1abc9c !important;
  }

  #image {
    opacity: 0.2;
    
}
.jumbotron{
  background-color: rgba(0,0,0,0.5);
}
h1,h2,h3,h4,h5,h6,p{
      font-family: inherit !important;
}
 
  </style>



</head>
<body>



<!-- Navbar -->
<nav class="navbar navbar-default">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>                        
      </button>
      <!-- <a class="navbar-brand" href="#">Me</a> -->
       

      <!-- <a id="td6" style="padding:20px; color:black;" href="#">
        
        
      </a>
       -->


   
        <a style="padding:20px;" href="#">
          <span style="color:black;" class="glyphicon glyphicon-map-marker"></span>
          <a style="padding:1px;  text-align: right; color:black;" id="td6"></a>
        </a>
      


    </div>
    <div class="collapse navbar-collapse" id="myNavbar">
      <ul class="nav navbar-nav navbar-right">
        <li><a href="#">LUGARES</a></li>
        <li><a href="#">EVENTOS</a></li>
      </ul>
    </div>
  </div>
</nav>


<!-- o DIv centro estava a usar esta classe class="container-fluid bg-1 text-center" -->
<!-- First Container -->
<div id="centro" align="center" style="padding-top:100px;">

<!-- ex classe jumbotron -->
<div class="">
  <h3 class="margin" style="font-size:18px; letter-spacing:5px;">SABIAS QUE...</h3>
  
  <h3 style="margin: 20px; letter-spacing:1px;" id="demo">Clica no botão para ver mais curiosidades.</h3>
  <h5 id="distancia" style="padding-bottom:80px;"></h5>
  <img src="" id="image">
   <div class="col-xs-12" style="height:50px;"></div>
  <button style="background-color:white; border: none; padding: 8px 10px; font-size:18px; letter-spacing:1px; font-size:15px;" id="buttonCuriosidades" onclick="myFunction()" type="button">MAIS CURIOSIDADES</button>

<table>
    <!--<tr><td id="td1"></td><td id="td2"></td></tr> -->
    <!-- <tr><td id="td3"></td><td id="td4"></td></tr> -->
    <tr><td style="letter-spacing:5px;" id="td6"></td></tr>     
    <!-- <tr><td>Address</td><td id="address"></td></tr> -->
    <!--<tr><td>Postal Code</td><td id="postalCode"></td></tr>-->
</table>

</div>
</div>



<!-- Second Container -->

<!-- Third Container (Grid) -->

<!-- Footer -->


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<script>
window.lat = 0;
window.lng = 0;
var url = "http://www.mapquestapi.com/geocoding/v1/reverse?key=kFNMhlge8uFUbXGvjW1WR7ezgxubYcWk&location={lat},{lng}&includeRoadMetadata=true&includeNearestIntersection=true";
function getLocation() {
  if(window.lat === 0)
      navigator.geolocation.getCurrentPosition(showPosition);
    else
      navigator.geolocation.getCurrentPosition(updateCoord);
}

function showPosition(position) {
    url = url.replace("{lat}",position.coords.latitude)
    url = url.replace("{lng}",position.coords.longitude);
    window.lat = position.coords.latitude;
  window.lng = position.coords.longitude;
    console.log(url);
    $.ajax({url:url}).done(function(data){
        console.log(data["results"][0]["locations"][0]);
        $("#address").html(data["results"][0]["locations"][0].street);
        $("#postalCode").html(data["results"][0]["locations"][0].postalCode);
        $("#postalCode").html(data["results"][0]["locations"][0].postalCode);
        $("#td2").html(data["results"][0]["locations"][0].adminArea1);
        $("#td1").html(data["results"][0]["locations"][0].adminArea1Type);
        $("#td4").html(data["results"][0]["locations"][0].adminArea3);
        $("#td3").html(data["results"][0]["locations"][0].adminArea3Type);
        $("#td6").html(data["results"][0]["locations"][0].adminArea5);
        $("#td5").html(data["results"][0]["locations"][0].adminArea5Type);
    });
}

function updateCoord(position){
  window.lat = position.coords.latitude;
  window.lng = position.coords.longitude;
}

getLocation();

function myFunction() {

  var cores = ['#FF6633', '#FFB399', '#FF33FF', '#FFFF99', '#00B3E6', 
      '#E6B333', '#3366E6', '#999966', '#99FF99', '#B34D4D',
      '#80B300', '#809900', '#E6B3B3', '#6680B3', '#66991A', 
      '#FF99E6', '#CCFF1A', '#FF1A66', '#E6331A', '#33FFCC',
      '#66994D', '#B366CC', '#4D8000', '#B33300', '#CC80CC', 
      '#66664D', '#991AFF', '#E666FF', '#4DB3FF', '#1AB399',
      '#E666B3', '#33991A', '#CC9999', '#B3B31A', '#00E680', 
      '#4D8066', '#809980', '#E6FF80', '#1AFF33', '#999933',
      '#FF3380', '#CCCC00', '#66E64D', '#4D80CC', '#9900B3', 
      '#E64D66', '#4DB380', '#FF4D4D', '#99E6E6', '#6666FF'];

  var z = Math.floor((Math.random() * cores.length));

  //mudar background color
 
  document.body.style.backgroundColor = cores[z];
  document.getElementById("buttonCuriosidades").style.color = cores[z];
  //mudar a cor do centro
  //document.getElementById("centro").style.background = cores[z];

  //getLocation();
  document.getElementById("distancia").innerHTML = "";

  



  if (document.getElementById('td6').text != ''){

  var frases = ["Blandy's Wine Lodge tem vinho.", "O Ribeiro Frio é lá em cima.", "O La Vie é um centro comercial.", "As piscinas do Porto Moniz são fixes.", "O Roseiral do Arco tem rosas.", "A praia da Calheta é porreira."];


  var local = [
          {nome: "La Vie", longitude:-16.914049, latitude:32.647471},
          {nome: "Roseiral do Arco", longitude:-16.955045, latitude:32.825686, img: 'madeira.jpg'},
          {nome: "Calheta", longitude:-17.179113, latitude:32.738242},
          {nome: "Porto Moniz", longitude:-17.170608, latitude:32.866684},
          {nome: "Blandy's Wine", longitude:-16.910601, latitude:32.647857},
          {nome: "Ribeiro Frio", longitude:-16.883333, latitude:32.733333}
        ];

  var x = Math.floor((Math.random() * frases.length));
  document.getElementById("demo").innerHTML = frases[x];
  var flag = true;

  local.forEach(function(ele){
    if(frases[x].includes(ele.nome) && flag){
      getDistanceFromLatLonInKm(window.lat, window.lng, ele.latitude, ele.longitude,'Km');
      if(typeof ele.img !== "undefined"){
        $(".bg-1").css({
                "background-image":"url('madeira.jpg')",
                "background-size":"100% 100%",
                            
                "background-repeat":"no-repeat"
              });
      }else{
      $(".bg-1").css({
          "background-image":"",
          "background-color":"#1abc9c"
        });
      }
      flag = false;
    }
  })  

  /*if (frases[x].includes(local.nome)) {


   


    alert("oh yeah");

    //getDistanceFromLatLonInKm(32.6538111,-16.9154246,32.648542,-16.910817,'Km');
    getDistanceFromLatLonInKm(window.lat, window.lng, local.latitude, local.longitude,'Km');
    //document.getElementById("distancia").innerHTML = "vai aqui";
  }*/

  //document.getElementById("demo").innerHTML = frases[x];

}

else {

  document.getElementById("demo").innerHTML = "Precisas de activar o GPS. Reinicia a app se o problema persistir.";
}

}
</script>


<script type="text/javascript">
function getDistanceFromLatLonInKm(latitude1,longitude1,latitude2,longitude2,units) {
  var p = 0.017453292519943295;    //This is  Math.PI / 180
  var c = Math.cos;
  var a = 0.5 - c((latitude2 - latitude1) * p)/2 + 
          c(latitude1 * p) * c(latitude2 * p) * 
          (1 - c((longitude2 - longitude1) * p))/2;
  var R = 6371; //  Earth distance in km so it will return the distance in km
 var dist = 2 * R * Math.asin(Math.sqrt(a)); 

document.getElementById("distancia").innerHTML = (Math.round(dist * 10) / 10)+" Km"; 
}
</script>




</body>
</html>